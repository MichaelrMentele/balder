datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider      = "prisma-client-js"
  binaryTargets = "native"
}

// Is a User a player?
model User {
  id    Int     @id @default(autoincrement())
  email String  @unique
  name  String?

  playerCampaign Campaign? @relation(fields: [campaignId], references: [id])
  campaignId     Int?

  ownedCampaigns Campaign[] @relation(name: "gmCampaign")
}

model Campaign {
  id          Int     @id @default(autoincrement())
  name        String
  description String?

  // A campaign can have many players and players can participate in many campaigns
  players User[]

  // A GM can have many campaigns, but a campaign only has one GM
  gm     User @relation(name: "gmCampaign", fields: [userId], references: [id])
  userId Int
}
